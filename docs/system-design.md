# 音声ファイル文字起こしWebアプリケーション 基本設計書

## 1. プロジェクト概要

### 1.1 目的
音声ファイルをアップロードし、AIによる文字起こしをバッチ処理で実行するWebアプリケーションを開発する。

### 1.2 システム名
batch-voice

### 1.3 対象ユーザー
- 会議録音の文字起こしが必要な企業・個人
- インタビューやポッドキャストの文字起こしが必要なコンテンツ制作者
- 音声コンテンツのアクセシビリティ向上を目指す組織

## 2. システム要件

### 2.1 機能要件

#### 2.1.1 音声ファイルアップロード機能
- 対応フォーマット：MP3, WAV, M4A, FLAC
- 最大ファイルサイズ：100MB
- 複数ファイルの同時アップロード対応
- ドラッグ&ドロップによるアップロード

#### 2.1.2 文字起こし処理機能
- バッチ処理による非同期実行
- 処理キューの管理
- 処理状況の表示（待機中、処理中、完了、エラー）
- 音声の言語自動検出

#### 2.1.3 結果表示・管理機能
- 文字起こし結果の表示
- タイムスタンプ付きテキスト
- 結果の編集機能
- 結果のダウンロード（TXT, SRT, VTT形式）

#### 2.1.4 ユーザー管理機能
- ユーザー登録・認証
- 処理履歴の管理
- 使用量の制限・監視

### 2.2 非機能要件

#### 2.2.1 性能要件
- 同時処理数：最大10ファイル
- 1時間の音声ファイル処理時間：10分以内
- レスポンス時間：Web UI操作は3秒以内

#### 2.2.2 可用性要件
- システム稼働率：99%以上
- 障害時の復旧時間：24時間以内

#### 2.2.3 セキュリティ要件
- アップロードファイルの暗号化
- 認証・認可の実装
- 処理完了後のファイル自動削除

## 3. 開発計画

### 3.1 フェーズ1：基盤構築 ✅ **完了**
- ✅ プロジェクト環境セットアップ
- ✅ データベース設計・構築（DynamoDB）
- ✅ 基本的なAPI設計（FastAPI + LocalStack）

### 3.2 フェーズ2：コア機能開発 🔄 **進行中**
- ✅ ファイルアップロード機能（S3連携）
- ✅ バッチ処理基盤（SQSキュー投入）
- ⏳ 文字起こし処理ワーカー（OpenAI Whisper API）
- ⏳ 基本的なフロントエンド画面

### 3.3 フェーズ3：機能拡張 ⏳ **予定**
- ⏳ ユーザー管理機能
- ⏳ 処理履歴管理
- ⏳ 結果編集機能

### 3.4 フェーズ4：運用準備 ⏳ **予定**
- ⏳ テスト実装
- ⏳ デプロイ環境構築
- ⏳ 監視・ログ設定

## 4. 実装済み機能

### 4.1 バックエンドAPI（完了）
- **FastAPI基盤**: CORS設定、自動文書生成
- **エンドポイント**:
  - `GET /api/health` - ヘルスチェック
  - `POST /api/jobs` - ファイルアップロード＆ジョブ作成
  - `GET /api/jobs/{job_id}` - ジョブ状態確認
- **AWS連携**: S3ファイルストレージ、SQSキュー、DynamoDB
- **ドキュメント**: Swagger UI (`/docs`)

### 4.2 開発環境（完了）
- **LocalStack**: AWS サービスエミュレーション
- **Docker**: コンテナ化された開発環境
- **自動セットアップ**: Makefile + シェルスクリプト

## 5. 留意事項

### 5.1 セキュリティ
- アップロードファイルのウイルスチェック
- 個人情報を含む音声ファイルの取り扱い
- API レート制限の実装

### 5.2 コスト管理
- 文字起こしAPI使用料の管理
- ストレージ使用量の監視
- 処理時間の最適化

### 5.3 拡張性
- 他の文字起こしサービスとの連携
- 多言語対応
- 音声品質向上機能の追加