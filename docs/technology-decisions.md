# 技術選定書

## 1. 概要

このドキュメントでは、batch-voiceプロジェクトで選択した技術・サービスの特徴と判断理由を記載します。

## 2. データベース

### 選択：DynamoDB

#### 特徴
- NoSQLデータベース
- 完全マネージド（サーバー管理不要）
- 使用量に応じた従量課金
- 高可用性・自動スケーリング
- 低レイテンシー

#### 判断理由
- **コスト重視**: 初期段階では使用量が少なく、従量課金が有利
- **運用負荷軽減**: サーバー管理・バックアップ・メンテナンスが不要
- **AWS統合**: 他のAWSサービスとのシームレスな連携
- **スケーラビリティ**: 将来的な負荷増加に柔軟に対応

#### 比較検討：DynamoDB vs PostgreSQL

| 項目 | DynamoDB | PostgreSQL (RDS) |
|------|----------|------------------|
| **コスト** | 従量課金・無料枠あり | 固定料金（t3.micro: $13-15/月） |
| **運用負荷** | 完全マネージド | バックアップ・メンテナンス必要 |
| **スケーラビリティ** | 自動スケーリング | 手動スケーリング |
| **クエリ** | NoSQL・制限あり | 豊富なSQL機能 |
| **開発工数** | テーブル設計工夫必要 | 既存のORM知識活用可能 |
| **AWS統合** | ネイティブ統合 | 標準的な統合 |

#### 判断理由（詳細）
- **初期段階での低コスト**: 使用量が少ない間は従量課金が有利
- **運用負荷の最小化**: インフラ管理者不在の小規模チームに適している
- **AWS統合**: 他のAWSサービスとの連携が容易
- **将来の拡張性**: トラフィック増加時の自動対応

#### 考慮点
- SQLクエリの複雑性への対応
- リレーショナルデータの設計工夫が必要
- GSI（Global Secondary Index）による検索クエリの最適化
- 開発初期のテーブル設計への投資が必要

## 3. メッセージキュー

### 選択：SQS (Simple Queue Service)

#### 特徴
- 完全マネージドメッセージキュー
- 高可用性・耐久性
- 自動スケーリング
- Dead Letter Queue対応
- 低コスト（100万リクエスト/月まで無料）

#### 判断理由
- **運用負荷軽減**: Redisサーバーの管理・運用が不要
- **コスト効率**: 無料枠の活用で初期コストを削減
- **信頼性**: メッセージの確実な配信とエラーハンドリング
- **AWS統合**: DynamoDB・ECSとの連携が容易

#### 比較検討
- **Celery + Redis**: 自前でRedisサーバーを管理する必要がある
- **SQS**: 完全マネージドで運用コストが低い

## 4. バッチ処理

### 選択：ECS Tasks

#### 特徴
- Dockerコンテナベースの実行環境
- 自動スケーリング対応
- 長時間処理対応
- CPU・メモリリソースの柔軟な設定
- 従量課金（実行時間のみ）

#### 判断理由
- **長時間処理対応**: 音声ファイルの処理時間制限なし
- **リソース効率**: 処理時のみリソースを使用
- **スケーラビリティ**: 複数ジョブの並列実行
- **コスト効率**: 実行時間のみの課金

#### 比較検討
- **AWS Lambda**: 15分の実行時間制限があり、長時間の音声処理には不適
- **EC2**: 常時起動によるコスト増加
- **ECS Tasks**: 必要時のみ起動で最適

## 5. ファイルストレージ

### 選択：S3 (Simple Storage Service)

#### 特徴
- オブジェクトストレージ
- 高可用性・耐久性（99.999999999%）
- 自動スケーリング
- ライフサイクル管理
- 低コスト

#### 判断理由
- **信頼性**: 音声ファイルの安全な保存
- **コスト効率**: 使用量に応じた課金
- **統合性**: 他のAWSサービスとの連携
- **管理機能**: 自動削除・アーカイブ機能

## 6. フロントエンド

### 選択：React.js + TypeScript

#### 特徴
- コンポーネントベースUI
- 静的型チェック（TypeScript）
- 豊富なエコシステム
- 高いパフォーマンス

#### 判断理由
- **開発効率**: 再利用可能なコンポーネント
- **品質向上**: TypeScriptによる型安全性
- **エコシステム**: 豊富なライブラリ・ツール
- **メンテナンス性**: 大規模アプリケーションに適している

### 選択：Vite

#### 特徴
- 高速なビルドツール
- 軽量・高速な開発サーバー
- ES modulesネイティブサポート

#### 判断理由
- **開発体験**: 高速なHMR（Hot Module Replacement）
- **ビルド速度**: 従来ツールより高速
- **モダンな技術**: 最新のJavaScript標準に対応

## 7. バックエンド

### 選択：FastAPI

#### 特徴
- 高性能なPython Webフレームワーク
- 自動的なAPI文書生成
- 型ヒント対応
- 非同期処理サポート

#### 判断理由
- **開発効率**: 自動的なSwagger文書生成
- **パフォーマンス**: 高速な実行速度
- **型安全性**: Pydanticによるデータバリデーション
- **AWS統合**: boto3との親和性

### 選択：boto3 / aiobotocore

#### 特徴
- AWS公式SDK
- 全AWSサービス対応
- 非同期操作サポート（aiobotocore）

#### 判断理由
- **公式サポート**: AWS公式による安定性
- **機能網羅**: 全AWSサービスの機能利用
- **非同期処理**: 高いパフォーマンス

## 8. コンテナ技術

### 選択：Docker + Docker Compose

#### 特徴
- コンテナ化技術
- 環境統一
- 簡単なデプロイ

#### 判断理由
- **開発環境統一**: チーム開発での環境差異を解消
- **デプロイ簡素化**: 本番環境への容易なデプロイ
- **ECS統合**: ECS Tasksでの実行に適している

## 9. 文字起こしサービス

### 選択：OpenAI Whisper API

#### 特徴
- 高精度な音声認識
- 多言語対応
- API提供
- 継続的な改善

#### 判断理由
- **精度**: 業界最高水準の認識精度
- **多言語**: 日本語を含む多言語対応
- **API**: 簡単な統合
- **コスト**: 従量課金で初期コスト不要

## 10. 総合的な判断

### AWS統合のメリット
- 各サービス間の連携が容易
- 統一されたアクセス管理（IAM）
- 監視・ログ機能の統合
- 運用負荷の軽減

### コスト効率
- 従量課金制による初期コスト削減
- 無料枠の最大限活用
- 自動スケーリングによるリソース最適化

### 運用負荷軽減
- マネージドサービスの活用
- サーバー管理の不要化
- 自動バックアップ・メンテナンス

### 将来の拡張性
- 需要に応じたスケーリング
- 新機能追加時の柔軟性
- 他のAWSサービスとの連携可能性